const DISABLED={disabled:!0},READONLY={readonly:!0},CHECKED={checked:!0},REQUIRED={required:!0},SELECTED={selected:!0},MERGE=(...e)=>{const t={};return e.forEach((e=>{Object.keys(e).forEach((i=>{t[i]=e[i]}))})),t};class Form{constructor(e,t={},i=[],s=[]){this.e=document.querySelector(e),this.form=document.createElement("form"),Object.keys(t).forEach((e=>{this.form.setAttribute(e,t[e])})),this.e.querySelector("form")?this.e.querySelectorAll("form").forEach((e=>{e.insertAdjacentElement("afterend",this.form)})):this.e.insertAdjacentElement("afterbegin",this.form),i.forEach((e=>{const t=document.createElement("link");t.src=e,t.rel="stylesheet",document.head.appendChild(t)})),s.forEach((e=>{const t=document.createElement("script");t.src=e,document.body.appendChild(t)})),this.structure=[]}#e(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replaceAll("<","&lt;").replaceAll(">","&gt;")).replace(/\[b\](.*?)\[\/b\]/,"<b>$1</b>")).replace(/\[i\](.*?)\[\/i\]/,"<em>$1</em>")).replace(/\[u\](.*?)\[\/u\]/,"<u>$1</u>")).replace(/\[color=(.*?)\](.*?)\[\/color\]/g,'<font color="$1">$2</font>')).replace(/\[size=([\d]+)\](.*?)\[\/size\]/g,'<font style="font-size:$1px">$2</font>')).replace(/\[url=(.*?)\](.*?)\[\/url\]/g,'<a href="$1">$2</a>')).replace(/\[url\](.*?)\[\/url\]/g,'<a href="$1">$1</a>')).replace(/\[email\](.*?)\[\/email\]/g,'<a href="mailto:$1">$1</a>')).replace(/\[img=(.*?)\](.*?)\[\/img\]/g,'<img src="$2" alt="$1"/>')).replace(/\[img\](.*?)\[\/img\]/g,'<img src="$1" alt=""/>')).replace(/\[code\](.*?)\[\/code\]/g,"<code>$1</code>")).replace(/\[\*\](.*?)/g,"<li>$1</li>")).replace(/\[list\](.*?)\[\/list\]/g,"<ul>$1</ul>")).replace(/\[list=1\](.*?)\[\/list\]/g,"<ol>$1</ol>")).replace(/\[list=a\](.*?)\[\/list\]/g,'<ul style="list-style:lower-alpha;">$1</ul>')).replace(/\[list=A\](.*?)\[\/list\]/g,'<ul style="list-style:upper-alpha;">$1</ul>')).replace(/\[list=i\](.*?)\[\/list\]/g,'<ul style="list-style:lower-roman;">$1</ul>')).replace(/\[list=I\](.*?)\[\/list\]/g,'<ul style="list-style:upper-roman;">$1</ul>')}addText(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"text",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"text",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addPassword(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"password",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"password",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addNumber(e,t=0,i={}){if(Array.isArray(e))for(let s=0;s<e.length;s++)this.structure.push({build:"input",input:"number",name:e[s],value:t[s],attributes:i[s],fieldset:`fieldset#${f[s]?f[s]:""}`});else this.structure.push({build:"input",input:"number",name:e,value:t,attributes:i,fieldset:`fieldset#${f||""}`})}addCheckbox(e,t=!1,i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"checkbox",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"checkbox",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addRadio(e,t=!1,i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"radio",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"radio",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addButton(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"button",input:"button",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"button",input:"button",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addSubmit(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"button",input:"submit",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"button",input:"submit",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addReset(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"button",input:"reset",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"button",input:"reset",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addColor(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"color",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"color",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addSearch(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"search",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"search",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addFile(e,t={},i=""){if(Array.isArray(e))for(let s=0;s<e.length;s++)this.structure.push({build:"input",input:"file",name:e[s],attributes:t[s],fieldset:`fieldset#${i[s]?i[s]:""}`});else this.structure.push({build:"input",input:"file",name:e,attributes:t,fieldset:`fieldset#${i||""}`})}addEmail(e,t="",s={},u=""){if(Array.isArray(e))for(let i=0;i<e.length;i++)this.structure.push({build:"input",input:"email",name:e[i],value:t[i],attributes:s[i],fieldset:`fieldset#${u[i]?u[i]:""}`});else this.structure.push({build:"input",input:"email",name:e,value:t,attributes:s,fieldset:`fieldset#${u[i]?u[i]:""}`})}addDate(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"date",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"date",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addDateTime(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"datetime-local",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"datetime-local",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addMonth(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"month",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"month",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addWeek(e,t="",i={}){if(Array.isArray(e))for(let s=0;s<e.length;s++)this.structure.push({build:"input",input:"week",name:e[s],value:t[s],attributes:i[s],fieldset:`fieldset#${f[s]?f[s]:""}`});else this.structure.push({build:"input",input:"week",name:e,value:t,attributes:i,fieldset:`fieldset#${f||""}`})}addTime(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"time",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"time",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addHidden(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"hidden",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"hidden",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addImg(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"image",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"image",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addRange(e,t=0,i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"range",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"range",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addTel(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"tel",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"tel",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addURL(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"input",input:"url",name:e[u],value:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"input",input:"url",name:e,value:t,attributes:i,fieldset:`fieldset#${s||""}`})}addLabel(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"label",location:e[u],value:`${t[u]} `,attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"label",location:e,value:`${t} `,attributes:i,fieldset:`fieldset#${s||""}`})}addSelect(e,t,i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"select",options:t[u],attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"select",options:t,attributes:i,fieldset:`fieldset#${s||""}`})}addOption(e,t="",i=!1,s="",u=!1){const r=[];if(Array.isArray(e))for(let l=0;l<e.length;l++)u?r.push({option:t[l],value:e[l],selected:!!i[l]&&i[l],group:s[l]}):r.push({option:e[l],value:t[l],selected:!!i[l]&&i[l],group:s[l]});else u?r.push({option:t,value:e,selected:i||!1,group:s}):r.push({option:e,value:t,selected:i||!1,group:s});return r}addTextarea(e,t="",i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"textarea",name:e[u],value:`${t[u]} `,attributes:i[u],fieldset:`fieldset#${s[u]?s[u]:""}`});else this.structure.push({build:"textarea",name:e,value:`${t} `,attributes:i,fieldset:`fieldset#${s||""}`})}addFieldset(e,t={}){if(Array.isArray(e))for(let i=0;i<e.length;i++)this.structure.push({build:"fieldset",id:e[i],attributes:t[i]});else this.structure.push({build:"fieldset",id:e,attributes:t})}addLegend(e,t="",i={}){if(Array.isArray(n))for(let e=0;e<n.length;e++)this.structure.push({build:"legend",fieldset:`fieldset#${n[e]}`,value:t[e],attributes:i[e]});else this.structure.push({build:"legend",value:t,fieldset:`fieldset#${n}`,attributes:i})}addDatalist(e,t,i={}){if(Array.isArray(e))for(let s=0;s<e.length;s++)this.structure.push({build:"datalist",id:e[s],options:t[s],attributes:i[s]});else this.structure.push({build:"datalist",id:e,options:t,attributes:i})}addOutput(e,t,i={},s=""){if(Array.isArray(e))for(let u=0;u<e.length;u++)this.structure.push({build:"output",name:e[u],for:t[u],attributes:i[u],fieldset:`fieldset#${s||""}`});else this.structure.push({build:"output",name:e,for:t,attributes:i,fieldset:`fieldset#${s||""}`})}addBreak(e,t={},i=1){if(2==arguments.length)if(Array.isArray(e))for(let i=0;i<e.length;i++)for(let s=0;s<t;s++)this.structure.push({build:"break",location:e[i],attributes:void 0});else for(let i=0;i<t;i++)this.structure.push({build:"break",location:e[k],attributes:void 0});else if(Array.isArray(e))for(let s=0;s<e.length;s++)for(let u=0;u<i;u++)this.structure.push({build:"break",location:e[s],attributes:t[s]});else for(let s=0;s<i;s++)this.structure.push({build:"break",location:e[k],attributes:t[k]})}addSpace(e,t={},i=1){if(2==arguments.length)if(Array.isArray(e))for(let i=0;i<e.length;i++)for(let s=0;s<t;s++)this.structure.push({build:"space",location:e[i],attributes:void 0});else for(let i=0;i<t;i++)this.structure.push({build:"space",location:e[k],attributes:void 0});else if(Array.isArray(e))for(let s=0;s<e.length;s++)for(let u=0;u<i;u++)this.structure.push({build:"space",location:e[s],attributes:t[s]});else for(let s=0;s<i;s++)this.structure.push({build:"space",location:e[k],attributes:t[k]})}load(){let e=[];this.structure.forEach((t=>{let i;switch(t.build.toLocaleLowerCase()){case"input":i=document.createElement("input"),i.name=t.name,i.type=t.input,"image"===t.input?i.src=t.value:"string"==typeof t.value||"number"==typeof t.value?i.value=t.value:i.checked=t.value;break;case"label":i=document.createElement("label"),i.innerHTML=this.#e(t.value),t.location&&i.setAttribute("for",t.location.replace(/^.*?=|\]|#|\./g,""));break;case"break":i=document.createElement("br");break;case"space":i=document.createElement("span"),i.innerHTML="&nbsp;";break;case"button":i=document.createElement("button"),i.type=t.input,i.innerHTML=this.#e(t.value),i.name=t.name;break;case"select":i=document.createElement("select"),t.options.forEach((t=>{if(t.group)if(e.indexOf(t.group)<0){const s=document.createElement("optgroup");s.label=t.group;const u=new Option(t.option,t.value,t.selected,t.selected);s.appendChild(u),i.appendChild(s),e.push(t.group)}else{const e=i.querySelector(`optgroup[label="${t.group}"]`),s=new Option(t.option,t.value,t.selected,t.selected);e.appendChild(s)}else{const e=new Option(t.option,t.value,t.selected,t.selected);i.appendChild(e)}}));break;case"fieldset":i=document.createElement("fieldset"),i.id=t.id;break;case"legend":if(i=document.createElement("legend"),i.innerHTML=this.#e(t.value),!t.fieldset.match(/fieldset#.+/))throw new SyntaxError("Invalid fieldset");if(this.form.querySelector(`${t.fieldset} legend`))throw new Error("Legend already found!");break;case"datalist":i=document.createElement("datalist"),i.id=t.id,e=[],t.options.forEach((e=>{if(e.group)throw new SyntaxError("You cannot have option group for datalist");{const t=new Option(e.option,e.value,!1,!1);i.appendChild(t)}}));break;case"output":i=document.createElement("output"),i.name=t.name,i.setAttribute("for",t.for);break}if(t.attributes&&Object.keys(t.attributes).forEach((e=>{i.setAttribute(e,t.attributes[e])})),t.hasOwnProperty("location")&&t.location){const e=this.form.querySelector(`${t.location.replace(/\[(.*)=(.*)\]/,'[$1="$2"]')}`);e?e.insertAdjacentElement("beforebegin",i):this.form.appendChild(i)}else if(t.hasOwnProperty("fieldset")&&t.fieldset&&t.fieldset.match(/fieldset#.+/)){const e=this.form.querySelector(t.fieldset);e?e.appendChild(i):this.form.appendChild(i)}else this.form.appendChild(i)}))}getStructure(){return this.structure}}